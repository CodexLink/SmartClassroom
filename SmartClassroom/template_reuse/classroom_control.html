<div class="container content-offset">

    <div class="card-columns class-control-column">
            {% for ClassroomAttr in object_list %}
            {% if forloop.first %}
            <div class="col mb-auto">
                <div class="card">
                    <div class="card-body">
                        <h2 class="card-title">{{ ClassroomAttr.CourseSchedule_Room.Classroom_Name }}</h2>
                        <h3 class="card-subtitle text-black-secondary">Some general information that is displayed earlier from the cards section.</h3>
                        <p class="card-text text-black-primary">This classroom is currently associated with the device
                            '{{ ClassroomAttr.CourseSchedule_Room.Classroom_Dev }}' that is currently in {{ ClassroomAttr.CourseSchedule_Room.Classroom_Dev.Device_Status }}
                            State.</p>
                    </div>
                </div>
            </div>
            {% for message in messages %}
            {% if message.message == 'DeviceRequestSuccess' %}
            <div class="col mb-auto">
                <div class="card bg-success">
                    <div class="card-body">
                        <h2 class="card-title text-white-primary">Device is Online</h2>
                        <h3 class="card-subtitle text-white-secondary">You can access the controls for now.</h3>
                        <p class="card-text text-white-primary">Remember! Your action will always be recorded no matter what your role is. If you made a mistake, administrators will know.</p>
                    </div>
                </div>
            </div>
            {% elif message.message == 'DeviceRequestFailed' %}
            <div class="col mb-auto">
                <div class="card bg-danger">
                    <div class="card-body">
                        <h2 class="card-title text-white-primary">Device is Not Online or Connection Timed-Out!</h2>
                        <h3 class="card-subtitle text-white-secondary">Control Access is not Available.</h3>
                        <p class="card-text text-white-primary">Please check the device! The device might be put into a down state or the device just rebooted, please wait if that is the case.</p>
                    </div>
                </div>
            </div>
            {% elif message.message == 'CRAccessRequestChange' %}
            <div class="col mb-auto">
                <div class="card bg-warning">
                    <div class="card-body">
                        <h2 class="card-title text-white-primary">Classroom Access Request Granted!</h2>
                        <h3 class="card-subtitle text-white-secondary">Staff can now acces this classroom.</h3>
                        <p class="card-text text-white-primary">All staff were not able to access this classroom. Only if their schedule is assigned to it in which that schedule does in scope of the current time today.</p>
                    </div>
                </div>
            </div>
            {% elif message.message == 'LockStateRequestChange' %}
            <div class="col mb-auto">
                <div class="card bg-danger">
                    <div class="card-body">
                        <h2 class="card-title text-white-primary">Device is Not Online or Connection Timed-Out!</h2>
                        <h3 class="card-subtitle text-white-secondary">Control Access is not Available.</h3>
                        <p class="card-text text-white-primary">Please check the device! It may be set as unknown or the device just rebooted, please wait if that is the case.</p>
                    </div>
                </div>
            </div>
            {% elif message.message == 'ElectricStateRequestChange' %}
            <div class="col mb-auto">
                <div class="card bg-danger">
                    <div class="card-body">
                        <h2 class="card-title text-white-primary">Device is Not Online or Connection Timed-Out!</h2>
                        <h3 class="card-subtitle text-white-secondary">Control Access is not Available.</h3>
                        <p class="card-text text-white-primary">Please check the device! It may be set as unknown or the device just rebooted, please wait if that is the case.</p>
                    </div>
                </div>
            </div>
            {% elif message.message == 'DevRestartRequestChange' %}
            <div class="col mb-auto">
                <div class="card bg-danger">
                    <div class="card-body">
                        <h2 class="card-title text-white-primary">Device is Not Online or Connection Timed-Out!</h2>
                        <h3 class="card-subtitle text-white-secondary">Control Access is not Available.</h3>
                        <p class="card-text text-white-primary">Please check the device! It may be set as unknown or the device just rebooted, please wait if that is the case.</p>
                    </div>
                </div>
            </div>
            {% elif message.message == 'RoomAutomationRequestChange' %}
            <div class="col mb-auto">
                <div class="card bg-danger">
                    <div class="card-body">
                        <h2 class="card-title text-white-primary">Device is Not Online or Connection Timed-Out!</h2>
                        <h3 class="card-subtitle text-white-secondary">Control Access is not Available.</h3>
                        <p class="card-text text-white-primary">Please check the device! It may be set as unknown or the device just rebooted, please wait if that is the case.</p>
                    </div>
                </div>
            </div>
            {% elif message.message == 'InvalidCommand' %}
            <div class="col mb-auto">
                <div class="card bg-danger">
                    <div class="card-body">
                        <h2 class="card-title text-white-primary">Device is Not Online or Connection Timed-Out!</h2>
                        <h3 class="card-subtitle text-white-secondary">Control Access is not Available.</h3>
                        <p class="card-text text-white-primary">Please check the device! It may be set as unknown or the device just rebooted, please wait if that is the case.</p>
                    </div>
                </div>
            </div>
            {% endif %}
            {% endfor %}
            <div class="col mb-auto">
                <div class="card">
                    <div class="card-header border-0">
                        <h2 class="card-title">Scanner Device Outputs</h2>
                        <h3 class="card-subtitle text-black-secondary">Sensors available in the device. Last readings were saved and in the database.</h3>
                    </div>
                    <!-- Insert some extra buttons for admin -->
                    <div class="card-body list-group border-0" id="list-tab" role="tablist">
                        <a class="list-group-item d-flex justify-content-between align-items-center" data-toggle="list" href="javascript:void(0)" role="tab">Temperature Celcius<span class="badge badge-primary badge-pill bg-alert">{{ TempOutput }}°C</span></a>
                        <a class="list-group-item d-flex justify-content-between align-items-center" data-toggle="list" href="javascript:void(0)" role="tab">Humidity Percentage<span class="badge badge-primary badge-pill bg-success">{{ HumidOutput }}%</span></a>
                        <a class="list-group-item d-flex justify-content-between align-items-center" data-toggle="list" href="javascript:void(0)" role="tab">Calculated Heat Index<span class="badge badge-primary badge-pill bg-danger">{{ HeatInxOutput }}°C</span></a>
                        <a class="list-group-item d-flex justify-content-between align-items-center" data-toggle="list" href="javascript:void(0)" role="tab">Recent Motion Detection<span class="badge badge-primary badge-pill bg-warning">{{ PIRTTOutput }} second/s since {{ refresh_recent_time }}.</span></a>
                        <a class="list-group-item d-flex justify-content-between align-items-center" data-toggle="list" href="javascript:void(0)" role="tab">Authentication State<span class="badge badge-primary badge-pill bg-info">Currently Authenticated with ID: 1</span></a>
                    </div>
                    <div class="card-actions border-top d-flex justify-content-between align-items-center">
                        <span class="text-muted">Updated as of {{ refresh_recent_time }}. (The time you refereshed this page)</span>
                    </div>
                </div>
            </div>
            <div class="col mb-auto">
                <div class="card">
                    <div class="card-header border-0">
                        <h2 class="card-title">Classroom Device Options</h2>
                        <h3 class="card-subtitle text-black-secondary">{% if user_class == "ITSO Supervisor" %}You're not allowed to touch these controls! Contact your administrator!{% else %}For each actions that you commit, will be recorded by the system!{% endif %}</h3>
                    </div>
                    <!-- Insert some extra buttons for admin -->
                    <div class="card-body list-group border-0" id="list-tab" role="tablist">
                        {% if user_class == "ITSO Administrator" or user_class == "Project Owner" or user_class == "Project Administrator" %}
                        <a class="list-group-item d-flex justify-content-between align-items-center {% if user_class == 'ITSO Supervisor' or ResponseMessage == 'DeviceRequestFailed' %}disabled{% endif %}" href="{% if ResponseMessage == 'DeviceRequestFailed' or user_class == 'ITSO Supervisor' %}#{% else %}{% url 'classroom_take_action_cr_access' classUniqueID=Class_UID_Literal %}{% endif %}" role="tab" aria-controls="home">Toggle Classroom Access<span class="badge badge-primary badge-pill bg-{% if ResponseMessage == 'DeviceRequestFailed' %}dark{% else %}info{% endif %}">{% if ResponseMessage != 'DeviceRequestFailed' %}{{ ClassAccessState }}{% else %}Unknown{% endif %}</span></a>
                        {% endif %}
                        <a class="list-group-item d-flex justify-content-between align-items-center {% if user_class == 'ITSO Supervisor' or ResponseMessage == 'DeviceRequestFailed' %}disabled{% endif %}" href="{% if user_class == 'ITSO Supervisor' or ResponseMessage == 'DeviceRequestFailed' %}#{% else %}{% url 'classroom_take_action_lock_state' classUniqueID=Class_UID_Literal %}{% endif %}" role="tab" aria-controls="home">Toggle Lock<span class="badge badge-primary badge-pill bg-{% if ResponseMessage == 'DeviceRequestFailed' %}dark{% else %}{{ LockState|lower }}{% endif %}">{% if ResponseMessage != 'DeviceRequestFailed' %}{{ LockState }}{% else %}Unknown{% endif %}</span></a>
                        <a class="list-group-item d-flex justify-content-between align-items-center {% if user_class == 'ITSO Supervisor' or ResponseMessage == 'DeviceRequestFailed' %}disabled{% endif %}" href="{% if user_class == 'ITSO Supervisor' or ResponseMessage == 'DeviceRequestFailed' %}#{% else %}{% url 'classroom_take_action_electric_state' classUniqueID=Class_UID_Literal %}{% endif %}" role="tab" aria-controls="profile">Toggle Electricity<span class="badge badge-primary badge-pill bg-{% if ResponseMessage == 'DeviceRequestFailed' %}dark{% else %}danger{% endif %}">{% if ResponseMessage != 'DeviceRequestFailed' %}{{ ElectricityState }}{% else %}Unknown{% endif %}</span></a>
                        <a class="list-group-item d-flex justify-content-between align-items-center {% if user_class == 'ITSO Supervisor' or ResponseMessage == 'DeviceRequestFailed' %}disabled{% endif %}" href="{% if user_class == 'ITSO Supervisor' or ResponseMessage == 'DeviceRequestFailed' %}#{% else %}{% url 'classroom_take_action_device_reset' classUniqueID=Class_UID_Literal %}{% endif %}" role="tab" aria-controls="profile">Restart Device<span class="badge badge-primary badge-pill bg-{% if ResponseMessage == 'DeviceRequestFailed' %}dark{% else %}warning{% endif %}">{% if ResponseMessage != 'DeviceRequestFailed' %}{{ DeviceState }}{% else %}Unknown{% endif %}</span></a>
                        <a class="list-group-item d-flex justify-content-between align-items-center {% if user_class == 'ITSO Supervisor' or ResponseMessage == 'DeviceRequestFailed' %}disabled{% endif %}" href="{% if user_class == 'ITSO Supervisor' or ResponseMessage == 'DeviceRequestFailed' %}#{% else %}{% url 'classroom_take_action_automate' classUniqueID=Class_UID_Literal %}{% endif %}" role="tab" aria-controls="profile">Room Automate<span class="badge badge-primary badge-pill bg-{% if ResponseMessage == 'DeviceRequestFailed' %}dark{% else %}danger{% endif %}">{% if ResponseMessage != 'DeviceRequestFailed' %}{{ AutomateState }}{% else %}Unknown{% endif %}</span></a>
                    </div>
                </div>
            </div>
            {% endif %}
            {% empty %}
            <div class="col mb-auto">
                <div class="card bg-danger">
                    <div class="card-body">
                        <h2 class="card-title text-white-primary">Classroom Controls Are Not Viable</h2>
                        <h3 class="card-subtitle text-white-secondary">TL;DR: No candidate courses are subjected to this room to control.</h3>
                        <p class="card-text text-white-primary">There might be some records that can be displayed. But if there are no course assigned to this room, then we cannot provide you some controls and sensor readings. What's the point though!?</p>
                    </div>
                </div>
            </div>
            {% endfor %}
            <div class="col mb-auto">
                <div class="card">
                    <div class="card-header border-0">
                        <h2 class="card-title">Classroom Action Records</h2>
                        <h3 class="card-subtitle text-black-secondary">A set of actions made by {% if not user_class == "Professor" %}people{% else %}you{% endif %}, recently recorded by the system.
                        </h3>
                    </div>
                    <div class="card-body list-group border-0" id="list-tab" role="tablist">
                        {% if ClassLogs %}
                        {% for ActionCandidates in ClassLogs %}
                        <a href="#" class="list-group-item list-group-item-action {% if forloop.first %} active {% endif %}">
                            <div class="d-flex w-100">
                                <h6 class="mb-1 text-dark-primary">{{ ActionCandidates.UserActionTaken }}</h6>
                            </div>
                            <p class="mb-1 d-flex justify-content-between align-items-center">By {{ ActionCandidates.Course_Reference.CourseSchedule_Instructor.first_name }} {{ ActionCandidates.CourseSchedule_Instructor.middle_name|default_if_none:"" }} {{ ActionCandidates.Course_Reference.CourseSchedule_Instructor.last_name }} along with {{ ActionCandidates.Course_Reference.CourseSchedule_Section }}<span
                                    class="badge badge-primary badge-pill bg-{{ ActionCandidates.ActionLevel | lower }}">{{ ActionCandidates.ActionLevel }}</span></p>
                            <p class="mb-1 d-flex justify-content-between align-items-center"><small class="text-black-primary"> {{ ActionCandidates.TimeRecorded }}</small></p>
                        </a>
                        {% endfor %}
                        {% endif %}
                    </div>
                </div>
            </div>
            {% if not user_class == "Professor" %}
            <div class="col mb-auto">
                <div class="card">
                    <div class="card-header border-0">
                        <h2 class="card-title">Subjects Involved From This Room</h2>
                        <h3 class="card-subtitle text-black-secondary">A list of subjects along with instructors who are uses this room.
                        </h3>
                    </div>
                    <div class="card-body list-group border-0" id="list-tab" role="tablist">
                        {% for SubjectCandidates in SubjectsInvolved %}
                        <a href="#" class="list-group-item list-group-item-action {% if forloop.first %} active {% endif %}">
                            <div class="d-flex w-100">
                                <h6 class="mb-1 text-dark-primary ">{{ SubjectCandidates.CourseSchedule_CourseReference__Course_Code }} | {{ SubjectCandidates.CourseSchedule_CourseReference__Course_Name }}</h6>
                            </div>
                            <p class="mb-1 d-flex justify-content-between align-items-center">{{ SubjectCandidates.CourseSchedule_Section__Section_CompleteStringGroup }} handled by {{ SubjectCandidates.CourseSchedule_Instructor__first_name }} {{ SubjectCandidates.CourseSchedule_Instructor__middle_name|default_if_none:"" }} {{ SubjectCandidates.CourseSchedule_Instructor__last_name }} <span></span></p>
                        </a>
                        {% endfor %}
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
</div>
{%if not isUserFullCtrl %}
{% else %}

{% endif %}